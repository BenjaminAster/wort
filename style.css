
:root {
	font-family: system-ui, sans-serif;
	overflow-wrap: break-word;
	-webkit-tap-highlight-color: transparent;
	line-height: 1.5;
	background-color: var(--background);
	color: var(--text);
	scrollbar-color: var(--gray-5) transparent;
	accent-color: var(--text);

	--selection: var(--text);
	--sheet-border: var(--gray-3);
}

@media not print {
	:root[data-theme="dark"] {
		color-scheme: dark;
		--background: black;
		--gray-1: #111;
		--gray-2: #222;
		--gray-3: #333;
		--gray-4: #444;
		--gray-5: #555;
		--text: white;

		--header: var(--gray-3);
		--header-bottom-border: transparent;
		--footer: var(--gray-3);
		--footer-top-border: transparent;
		--editor-area: var(--gray-1);
		--sheet: var(--gray-2);

		--selection-opacity: 15%;
		--link: #abf;
	}
}

:root {
	color-scheme: light;
	--background: white;
	--gray-1: #eee;
	--gray-2: #ddd;
	--gray-3: #ccc;
	--gray-4: #bbb;
	--gray-5: #aaa;
	--text: black;

	--header: var(--background);
	--header-bottom-border: var(--gray-2);
	--footer: var(--background);
	--footer-top-border: var(--gray-2);
	--editor-area: var(--gray-1);
	--sheet: var(--background);

	--selection-opacity: 15%;
	--link: #00f;
}

body {
	box-sizing: border-box;
	block-size: 100dvb;
	margin: 0;
	display: flex;
	flex-direction: column;
}

@layer global {
	a {
		color: var(--link);
		text-decoration: none;
	}

	a:hover {
		text-decoration: underline;
	}

	h1, h2, h3, h4, h5, h6, b {
		font-weight: 600;
	}

	button, a, label, summary {
		cursor: pointer;
	}

	input {
		all: unset;
		appearance: auto;
	}

	button {
		all: unset;
	}
}

@media (hover) {
	button:hover {
		background-color: color-mix(in srgb, transparent, var(--text) 5%);
	}
}

button:active {
	background-color: color-mix(in srgb, black, transparent 90%);
}

header {
	padding: .5rem;
	background-color: var(--header);
	border-block-end: 1px solid var(--header-bottom-border);
	display: flex;
	flex-wrap: wrap;
	gap: .5rem;
}

header :is(button, label) {
	padding: .1rem;
	padding-inline: .6rem;
	border: 1px solid var(--gray-5);
	border-radius: .3rem;
}

footer {
	padding-block: .1rem;
	padding-inline: .4rem;
	background-color: var(--footer);
	border-block-start: 1px solid var(--footer-top-border);
}

.editor-container {
	flex-grow: 1;
	display: flex;
	flex-direction: column;
	position: relative;
	overflow: auto;
	background-color: var(--editor-area);
	scroll-behavior: smooth;
	scroll-padding-block: 4rem;
}

.editor {
	font-size: 1.5rem;
	line-height: 1.5;
	padding: 2rem;
	padding-block: 2.5rem;
	border: 1px solid var(--sheet-border);
	background-color: var(--sheet);
	/* background-color: #8888; */
	background-clip: padding-box;
	margin-block: 1rem;
	margin-inline: max(1rem, (100dvi - 40em) / 2);
	caret-color: transparent;
	outline: none;
	block-size: auto;
}

.editor > div {
	margin-block-end: .5rem;
}

.editor > :first-child {
	margin-block-start: 0;
}

.editor > :last-child {
	margin-block-end: 0;
}

.editor::selection, .editor ::selection {
	background-color: transparent;
	/* background-color: red; */
	color: inherit;
}

/* code {
	background-color: #8884;
	padding: .1em .3em;
	border: 1px solid #8885;
	border-radius: .3em;
} */

.overlay {
	position: absolute;
	pointer-events: none;
}

.caret {
	--direction: ltr;
	--writing-mode: horizontal-tb;
	direction: var(--direction);
	writing-mode: var(--writing-mode);

	--thickness: 1px;
	position: absolute;
	inset-inline-start: calc(var(--inline-start) * 1px);
	inset-block-start: calc(var(--block-start) * 1px);
	inline-size: var(--thickness);
	/* block-size: calc(var(--block-size) * 1px + 3px); */
	block-size: calc(var(--block-size) * 1px);
	background-color: #fff3;
	background-color: var(--text);
	z-index: 2;
	/* transition-property: inset-inline-start, inset-block-start, block-size, transform;
	transition-duration: 100ms; */
	--duration: 100ms;
	/* inset-block-end: calc(0px - var(--block-start) * 1px - var(--block-size) * 1px); */
	transition:
		inset-inline-start var(--duration) ease-out,
		inset-block-start var(--duration) ease-out,
		block-size var(--duration) ease-out,
		transform var(--duration) ease-out;
}

.caret.italic {
	transform: skewX(-10deg);
}

.caret.blink {
	animation: 1.1s ease-in-out infinite caret-blink;
}

@keyframes caret-blink {
	0% {
		opacity: 100%;
	}
	10% {
		opacity: 0%;
	}
	50% {
		opacity: 0%;
	}
	60% {
		opacity: 100%;
	}
}

.overlay .selections {
	opacity: var(--selection-opacity);
}

.selection {
	position: absolute;
	inset-inline-start: calc(var(--inline-start) * 1px);
	inset-block-start: calc(var(--block-start) * 1px);
	inline-size: calc(var(--inline-size) * 1px);
	block-size: calc(var(--block-size) * 1px);
	background-color: var(--selection);
	z-index: 1;
	box-sizing: border-box;
	/* border: 1px solid #888f; */
	background-clip: padding-box;
	/* outline: 1px solid #f008; */
	/* outline-offset: 1px; */
	/* border-radius: .2em; */
	/* transition-property: left, top, width, height; */
	/* transition-duration: 70ms; */
}
