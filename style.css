
:root {
	--background: black;
	--gray-1: #111;
	--gray-2: #222;
	--gray-3: #333;
	--gray-4: #444;
	--gray-5: #555;
	--text: white;

	--header: var(--gray-3);
	--footer: var(--gray-3);
	--editor-area: var(--gray-1);
	--sheet: var(--gray-2);
	--sheet-border: var(--gray-3);

	--selection: var(--text);
	--selection-opacity: 20%;
	--link: #abf;
}

@media (prefers-color-scheme: light) {
	:root {
		--background: white;
		--gray-1: #eee;
		--gray-2: #ddd;
		--gray-3: #ccc;
		--gray-4: #bbb;
		--gray-5: #aaa;
		--text: black;

		--header: var(--gray-2);
		--footer: var(--gray-2);
		--editor-area: var(--gray-1);
		--sheet: var(--background);

		--selection-opacity: 15%;
		--link: #00f;
	}
}

:root {
	font-family: system-ui, sans-serif;
	overflow-wrap: break-word;
	-webkit-tap-highlight-color: transparent;
	line-height: 1.5;
	background-color: var(--background);
	color: var(--text);
	scrollbar-color: var(--gray-5) transparent;
}

body {
	box-sizing: border-box;
	block-size: 100dvb;
	margin: 0;
	display: flex;
	flex-direction: column;
}

a {
	color: var(--link);
}

h1, h2, h3, h4, h5, h6, b {
	font-weight: 600;
}

header {
	padding: .5rem;
	background-color: var(--header);
}

footer {
	padding-block: .1rem;
	padding-inline: .3rem;
	background-color: var(--footer);
}

.editor-container {
	flex-grow: 1;
	display: flex;
	flex-direction: column;
	position: relative;
	overflow: auto;
	background-color: var(--editor-area);
	container-type: size;
}

.editor {
	font-size: 1.5rem;
	line-height: 1.5;
	padding: 1rem;
	border: 1px solid var(--sheet-border);
	background-color: var(--sheet);
	/* background-color: #8888; */
	background-clip: padding-box;
	margin-block: 1rem;
	margin-inline: max(1rem, (100dvi - 40em) / 2);
	caret-color: transparent;
	outline: none;
	block-size: auto;
}

.editor > div:not(:last-of-type) {
	margin-block-end: .5rem;
}

.editor::selection, .editor ::selection {
	background-color: transparent;
	/* background-color: red; */
	color: inherit;
}

/* code {
	background-color: #8884;
	padding: .1em .3em;
	border: 1px solid #8885;
	border-radius: .3em;
} */

.overlay {
	position: absolute;
	pointer-events: none;
}

.caret {
	--direction: ltr;
	--writing-mode: horizontal-tb;
	direction: var(--direction);
	writing-mode: var(--writing-mode);

	--thickness: 1px;
	position: absolute;
	inset-inline-start: calc(var(--inline-start) * 1px);
	inset-block-start: calc(var(--block-start) * 1px);
	inline-size: var(--thickness);
	/* block-size: calc(var(--block-size) * 1px + 3px); */
	block-size: calc(var(--block-size) * 1px);
	background-color: #fff3;
	background-color: var(--text);
	z-index: 2;
	/* transition-property: inset-inline-start, inset-block-start, block-size, transform;
	transition-duration: 100ms; */
	--duration: 100ms;
	/* inset-block-end: calc(0px - var(--block-start) * 1px - var(--block-size) * 1px); */
	transition:
		inset-inline-start var(--duration) ease-out,
		inset-block-start var(--duration) ease-out,
		block-size var(--duration) ease-out,
		transform var(--duration) ease-out;
}

.caret.italic {
	transform: skewX(-10deg);
}

.caret.blink {
	animation: 1.1s ease-in-out infinite caret-blink;
}

@keyframes caret-blink {
	0% {
		opacity: 100%;
	}
	10% {
		opacity: 0%;
	}
	50% {
		opacity: 0%;
	}
	60% {
		opacity: 100%;
	}
}

.overlay .selections {
	opacity: var(--selection-opacity);
}

.selection {
	position: absolute;
	inset-inline-start: calc(var(--inline-start) * 1px);
	inset-block-start: calc(var(--block-start) * 1px);
	inline-size: calc(var(--inline-size) * 1px);
	block-size: calc(var(--block-size) * 1px);
	background-color: var(--selection);
	z-index: 1;
	box-sizing: border-box;
	/* border: 1px solid #888f; */
	background-clip: padding-box;
	/* outline: 1px solid #f008; */
	/* outline-offset: 1px; */
	/* border-radius: .2em; */
	/* transition-property: left, top, width, height; */
	/* transition-duration: 70ms; */
}

.inverse-border-radius {
	--radius: 1rem;
	inline-size: 1rem;
	block-size: 1rem;
	overflow: hidden;
	position: absolute;
	inset-inline-start: 10rem;
	inset-block-start: 10rem;
}

.inverse-border-radius::before {
	content: "";
	display: block;
	border: var(--radius) solid red;
	border-start-start-radius: calc(var(--radius) * 2);
	inset: calc(var(--radius) * -1);
	position: absolute;
}
